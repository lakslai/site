<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Battle Quiz</title>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database-compat.js"></script>
    <style>
        :root { --red: #e21b3c; --blue: #1368ce; --yellow: #d89e00; --green: #26890c; --dark: #46178f; }
        body { font-family: 'Montserrat', sans-serif; background: var(--dark); color: white; margin: 0; padding: 10px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        .container { width: 100%; max-width: 500px; text-align: center; }
        
        /* –ö–Ω–æ–ø–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤ - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ */
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; }
        .answer-btn { border: none; height: 80px; border-radius: 12px; font-size: 16px; font-weight: bold; color: white; cursor: pointer; padding: 10px; display: flex; align-items: center; justify-content: center; }
        .btn-0 { background: var(--red); } .btn-1 { background: var(--blue); }
        .btn-2 { background: var(--yellow); } .btn-3 { background: var(--green); }
        
        /* –ò–ò –±–ª–æ–∫ - —Ç–µ–ø–µ—Ä—å —Ç–µ–∫—Å—Ç –Ω–µ –≤—ã–ª–µ—Ç–∞–µ—Ç */
        #ai-box { background: rgba(0,0,0,0.4); border: 2px solid #00f2ff; padding: 15px; border-radius: 15px; margin: 15px 0; font-family: monospace; font-size: 14px; text-align: left; min-height: 60px; word-wrap: break-word; overflow-wrap: break-word; }
        
        #timer-circle { font-size: 30px; font-weight: 900; background: white; color: var(--dark); width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 10px auto; }
        
        .hidden { display: none !important; }
        input, select { padding: 12px; width: 90%; border-radius: 10px; border: none; margin: 8px; font-size: 16px; }

        /* –°–µ–∫—Ä–µ—Ç–Ω–∞—è –∞–¥–º–∏–Ω–∫–∞ */
        .admin-panel { background: #111; padding: 15px; margin-top: 20px; border-radius: 15px; border: 1px solid red; text-align: left; width: 100%; box-sizing: border-box; }
        .admin-btn { background: #333; color: white; border: 1px solid white; padding: 5px 10px; margin: 2px; cursor: pointer; font-size: 12px; }
    </style>
</head>
<body>

<div class="container">
    <h1 id="main-title" onclick="secretClick()" style="cursor:pointer; user-select:none;">AI QUIZ ü§ñ</h1>

    <div id="login-screen">
        <input type="text" id="username" placeholder="–¢–≤–æ–µ –∏–º—è...">
        <select id="userteam">
            <option>–ö–æ–º–∞–Ω–¥–∞ 1</option><option>–ö–æ–º–∞–Ω–¥–∞ 2</option>
            <option>–ö–æ–º–∞–Ω–¥–∞ 3</option><option>–ö–æ–º–∞–Ω–¥–∞ 4</option>
        </select>
        <button class="answer-btn btn-1" style="width: 100%; height: 50px;" onclick="join()">–í–û–ô–¢–ò</button>
    </div>

    <div id="game-screen" class="hidden">
        <div id="timer-circle">60</div>
        <h3 id="question-text">–ñ–¥–µ–º —É—á–∏—Ç–µ–ª—è...</h3>
        <div id="ai-box">–ò–ò: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...</div>
        <div id="answers-grid" class="grid">
            <button class="answer-btn btn-0" id="opt-0" onclick="sendAnswer(0)"></button>
            <button class="answer-btn btn-1" id="opt-1" onclick="sendAnswer(1)"></button>
            <button class="answer-btn btn-2" id="opt-2" onclick="sendAnswer(2)"></button>
            <button class="answer-btn btn-3" id="opt-3" onclick="sendAnswer(3)"></button>
        </div>
        <h2 id="feedback" class="hidden">–û–¢–í–ï–¢ –ü–†–ò–ù–Ø–¢!</h2>
    </div>

    <div id="admin-area" class="admin-panel hidden">
        <h4>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–°–µ–∫—Ä–µ—Ç–Ω–æ)</h4>
        <div id="q-buttons"></div>
        <hr>
        <div id="admin-log" style="font-size: 11px; height: 150px; overflow-y: auto; background: #000; padding: 5px;"></div>
    </div>
</div>

<script>
// === –ö–û–ù–§–ò–ì FIREBASE (–í—Å—Ç–∞–≤—å —Å–≤–æ–π!) ===
const firebaseConfig = {
  apiKey: "AIzaSyC9QIPxowR7HdMFCxi0bRJ_Z20lXQXr5K0",
  authDomain: "ai-school-quiz.firebaseapp.com",
  databaseURL: "https://ai-school-quiz-default-rtdb.firebaseio.com",
  projectId: "ai-school-quiz",
  storageBucket: "ai-school-quiz.firebasestorage.app",
  messagingSenderId: "155195208675",
  appId: "1:155195208675:web:21799fc642e88ddce826d6",
  measurementId: "G-Y4N2NGVNS9"
};
// =====================================

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// –¢–£–¢ –¢–í–û–ò –í–û–ü–†–û–°–´. 
// correct: —ç—Ç–æ –∏–Ω–¥–µ–∫—Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ (0, 1, 2 –∏–ª–∏ 3)
const questions = [
    { q: "–ß—Ç–æ —Ç–∞–∫–æ–µ –Ω–µ–π—Ä–æ—Å–µ—Ç—å?", opts: ["–ü—Ä–æ–≥—Ä–∞–º–º–∞", "–ñ–∏–≤–æ–π –º–æ–∑–≥", "–í–∏—Ä—É—Å", "–ß–∏–ø"], correct: 0, ai: "–ù–µ–π—Ä–æ—Å–µ—Ç—å ‚Äî —ç—Ç–æ –∞–ª–≥–æ—Ä–∏—Ç–º, –∏–º–∏—Ç–∏—Ä—É—é—â–∏–π —Ä–∞–±–æ—Ç—É —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ –º–æ–∑–≥–∞. –û–Ω–∞ –æ–±—É—á–∞–µ—Ç—Å—è –Ω–∞ –æ–≥—Ä–æ–º–Ω—ã—Ö –º–∞—Å—Å–∏–≤–∞—Ö –¥–∞–Ω–Ω—ã—Ö." },
    { q: "–ö—Ç–æ —Å–æ–∑–¥–∞–ª ChatGPT?", opts: ["Google", "Apple", "OpenAI", "Microsoft"], correct: 2, ai: "ChatGPT —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –∫–æ–º–ø–∞–Ω–∏–µ–π OpenAI. –ú–æ–¥–µ–ª—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É GPT (Generative Pre-trained Transformer)." },
    { q: "–ú–æ–∂–µ—Ç –ª–∏ –ò–ò –∏–º–µ—Ç—å —á—É–≤—Å—Ç–≤–∞?", opts: ["–î–∞", "–ù–µ—Ç", "–ò–Ω–æ–≥–¥–∞", "–í –±—É–¥—É—â–µ–º"], correct: 1, ai: "–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –ò–ò –ª–∏—à—å –∏–º–∏—Ç–∏—Ä—É–µ—Ç —ç–º–æ—Ü–∏–∏, –æ—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ —Ç–µ–∫—Å—Ç–∞. –†–µ–∞–ª—å–Ω–æ–≥–æ —Å–æ–∑–Ω–∞–Ω–∏—è —É –Ω–µ–≥–æ –Ω–µ—Ç." },
    { q: "–ì–ª–∞–≤–Ω—ã–π —Ä–∏—Å–∫ —Ä–∞–∑–≤–∏—Ç–∏—è –ò–ò?", opts: ["–í–æ–π–Ω–∞", "–ë–µ–∑—Ä–∞–±–æ—Ç–∏—Ü–∞", "–°–∫—É–∫–∞", "–ü–æ–ª–æ–º–∫–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞"], correct: 1, ai: "–ú–Ω–æ–≥–∏–µ —ç–∫—Å–ø–µ—Ä—Ç—ã —Å—á–∏—Ç–∞—é—Ç, —á—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—é —Ä—è–¥–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–π." }
];

let clickCount = 0;
function secretClick() {
    clickCount++;
    if(clickCount >= 5) document.getElementById('admin-area').classList.toggle('hidden');
}

function join() {
    if(!document.getElementById('username').value) return alert("–ò–º—è!");
    document.getElementById('login-screen').classList.add('hidden');
    document.getElementById('game-screen').classList.remove('hidden');
}

function sendAnswer(idx) {
    let name = document.getElementById('username').value;
    let team = document.getElementById('userteam').value;
    db.ref('answers/' + name).set({ team: team, answer: idx, time: Date.now() });
    document.getElementById('answers-grid').classList.add('hidden');
    document.getElementById('feedback').classList.remove('hidden');
}

// –†–µ–Ω–¥–µ—Ä–∏–º –∫–Ω–æ–ø–∫–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –∞–¥–º–∏–Ω–∫–µ
const qDiv = document.getElementById('q-buttons');
questions.forEach((item, index) => {
    let btn = document.createElement('button');
    btn.className = "admin-btn";
    btn.innerText = "–í–æ–ø—Ä–æ—Å " + (index + 1);
    btn.onclick = () => {
        db.ref('answers').remove();
        db.ref('currentTask').set({ ...item, startTime: Date.now() });
    };
    qDiv.appendChild(btn);
});

db.ref('currentTask').on('value', snap => {
    const data = snap.val();
    if(data) {
        document.getElementById('question-text').innerText = data.q;
        data.opts.forEach((text, i) => { document.getElementById('opt-'+i).innerText = text; });
        document.getElementById('answers-grid').classList.remove('hidden');
        document.getElementById('feedback').classList.add('hidden');
        typeAI(data.ai);
        startTimer(60);
    }
});

function typeAI(text) {
    let i = 0; let box = document.getElementById('ai-box'); box.innerText = "–ò–ò: ";
    let int = setInterval(() => { box.innerText += text[i]; i++; if(i >= text.length) clearInterval(int); }, 30);
}

function startTimer(s) {
    let t = s; let el = document.getElementById('timer-circle');
    if(window.timerInt) clearInterval(window.timerInt);
    window.timerInt = setInterval(() => { t--; el.innerText = t; if(t <= 0) clearInterval(window.timerInt); }, 1000);
}

// –õ–æ–≥ –¥–ª—è —É—á–∏—Ç–µ–ª—è: –ö–¢–û –ü–†–ê–í
db.ref('answers').on('value', snap => {
    let log = document.getElementById('admin-log'); log.innerHTML = "";
    let currentQ = null;
    db.ref('currentTask').once('value', qSnap => {
        currentQ = qSnap.val();
        if(snap.val() && currentQ) {
            Object.keys(snap.val()).forEach(u => {
                let ans = snap.val()[u];
                let isCorrect = ans.answer === currentQ.correct ? "‚úÖ –í–ï–†–ù–û" : "‚ùå –ù–ï–¢";
                log.innerHTML += `<div>${isCorrect} | ${u} (${ans.team})</div>`;
            });
        }
    });
});
</script>
</body>
</html>
